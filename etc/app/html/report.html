<!DOCTYPE html>
<html lang="en" xmlns:tpl="http://software.in2p3.fr/lavoisier/template.xsd">
<head tpl:include="/resource/app/html/header.html"></head>

<body class="hold-transition sidebar-mini ">
<div class="wrapper">

    <!-- Navbar -->
    <nav tpl:include="/resource/app/html/navbar.html"></nav>
    <!-- /.navbar -->

    <!-- Main Sidebar Container -->
    <aside tpl:include="/resource/app/html/sidebar.html"></aside>
        <!-- /sidebar -->


    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <div class="content-header">
            <div class="container-fluid">
                <div class="row mb-2">
                    <div class="col-sm-6">
                            <img tpl:foreach="root" src="/resource/app/img/logo-{@tenant}.png"  />
                    </div><!-- /.col -->
                    <div class="col-sm-6">
                        <ol class="breadcrumb float-sm-right">
                            <li class="breadcrumb-item"><a href="/">Home</a></li>
                            <li class="breadcrumb-item active">Dashboards</li>
                            <li tpl:foreach="root" class="breadcrumb-item active">Dashboard {{@tenant}}</li>
                        </ol>
                    </div><!-- /.col -->
                </div><!-- /.row -->
            </div><!-- /.container-fluid -->
        </div>
        <!-- /.content-header -->

        <!-- Main content -->
        <div class="content">
            <div class="container-fluid">



                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="home-tab" data-toggle="tab" href="#sl" role="tab" aria-controls="SparkLine" aria-selected="true">SparkLine</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="profile-tab" data-toggle="tab" href="#fig" role="tab" aria-controls="Figures" aria-selected="false">Figures</a>
                        </li>
                    </ul>

                    <div class="tab-content" id="myTabContent">

                        <div class="tab-pane fade show active" id="sl" role="tabpanel" aria-labelledby="home-tab">

                            <div class="card" tpl:foreach="/root">

                                    <div class="table-responsive">
                                        <table class="table m-0">
                                            <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Availabilities</th>
                                                <th>Reliabilities</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr tpl:foreach="group">
                                                <td>{{@name}}</td>

                                                <td>
                                                    <div class="sparkbar" data-height="40">{{@spark-av}}</div>
                                                </td>

                                                <td>
                                                    <div class="sparkbar"  data-height="40">{{@spark-re}}</div>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                            </div>

                        </div>


                        <div class="tab-pane fade" id="fig" role="tabpanel" aria-labelledby="profile-tab">

                            <div class="card" tpl:foreach="/root">


                                    <div class="card-header">{{group/@name}}</div>


                                    <div class="card-body">
                                        <table class="table-responsive dataTable">
                                            <thead>
                                            <tr>

                                                <th>Timestamp</th>
                                                <th>Availabilities</th>
                                                <th>Reliabilities</th>
                                                <th>Downtime</th>
                                                <th>Unknown</th>

                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr tpl:foreach="group/results">

                                                <td>
                                                    {{@timestamp}}
                                                </td>

                                                <td>
                                                    <span tpl:if="@availability &gt;80" class="badge bg-success">{{format-number(@availability,'#.00')}}</span>
                                                    <span tpl:else="" class="badge bg-danger">{{format-number(@availability,'#.00')}}</span>
                                                </td>

                                                <td>
                                                    <span tpl:if="@reliability &gt;85" class="badge bg-success">{{format-number(@reliability,'#.00')}}</span>
                                                    <span tpl:else="" class="badge bg-danger">{{format-number(@reliability,'#.00')}}</span>
                                                </td>

                                                <td>

                                                    <span  tpl:if="format-number(@downtime*100,'#.00') &gt; 10" class="minilabel badge bg-warning" title="Downtime : {{format-number(@downtime*100,'#.00')}} % ">
                                {{format-number(@downtime*100,'#.00')}}
                            </span>
                                                    <span  tpl:else="" class="minilabel badge bg-success" title="Downtime : {{format-number(@downtime*100,'#.00')}} % ">
                                {{format-number(@downtime*100,'#.00')}}
                                                    </span>

                                                        </td>

                                            <td>


                                                    <span  tpl:if="format-number(@unknown*100,'#.00') &gt; 10" class="minilabel badge bg-warning" title="unknown : {{format-number(@unknown*100,'#.00')}} % ">
                                {{format-number(@unknown*100,'#.00')}}
                            </span>
                                                    <span  tpl:else="" class="minilabel badge bg-success" title="unknown : {{format-number(@unknown*100,'#.00')}} % ">
                                {{format-number(@unknown*100,'#.00')}}
                            </span>


                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>

                            </div>

                        </div>


                    </div>





                <!-- /.row -->
            </div>
            <!-- /.container-fluid -->
        </div>
        <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->
    <!-- Main Footer -->
        <footer tpl:include="/resource/app/html/footer.html"></footer>
</div>
<!-- ./wrapper -->

<!-- REQUIRED SCRIPTS -->

<style>
    span.minilabel
    {
        padding:0 2px 0 2px; ;

        font-size: smaller;
        margin:10px;


    }
</style>


<!-- jQuery -->
<script src="/resource/app/html/adminlte/plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap -->
<script src="/resource/app/html/adminlte/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- adminlte -->
<script src="/resource/app/html/adminlte/dist/js/adminlte.js"></script>

<script src="/resource/app/html/adminlte/plugins/sparkline/jquery.sparkline.min.js"></script>

<script>

   $(function () {

'use strict'

/* SPARKLINE CHARTS
* ----------------
* Create a inline charts with spark line
*/

//-----------------
//- SPARKLINE BAR -
//-----------------
$('.sparkbar').each(function () {

  var range_map = $.range_map({
    '0:80': 'red',
    '80:': 'green'
  })

var $this = $(this)
$this.sparkline('html', {
type    : 'bar',
chartRangeMin: 0,
colorMap: range_map,
height  : $this.data('height') ? $this.data('height') : '30'

})
})
})

</script>

<link rel="stylesheet" href="/resource/app/html/adminlte/plugins/datatables/dataTables.bootstrap.css"/>
<link rel="stylesheet" href="/resource/app/html/adminlte/plugins/datatables/jquery.dataTables.min.css"/>


<script src="/resource/app/html/adminlte/plugins/datatables/dataTables.bootstrap.min.js"></script>
<script src="/resource/app/html/adminlte/plugins/datatables/jquery.dataTables.min.js"></script>


<script>
  $(function () {

     $('.dataTable').dataTable({
      "paging": true,
      "searching": true,
      "ordering": true,
       buttons: [
        'copy'
    ]
    });



  });
</script>

</body>
</html>
